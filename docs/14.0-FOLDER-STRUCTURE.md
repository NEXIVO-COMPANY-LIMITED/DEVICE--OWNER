# 14.0 FOLDER STRUCTURE

Full project layout in tree form. Package: **`com.example.deviceowner`** (Kotlin). Root folder may be **DEVICEOWNER** or **DeviceOwnerAutoUpdate**.

---

## Full project tree

```
DEVICEOWNER/
├── app/
│   ├── src/
│   │   ├── main/
│   │   │   ├── java/com/example/deviceowner/
│   │   │   │   ├── AppConfig.kt
│   │   │   │   ├── DeviceOwnerApplication.kt
│   │   │   │   ├── config/
│   │   │   │   │   ├── ApiConstants.kt
│   │   │   │   │   └── FrpConfig.kt
│   │   │   │   ├── control/
│   │   │   │   │   ├── HardLockManager.kt
│   │   │   │   │   └── RemoteDeviceControlManager.kt
│   │   │   │   ├── core/
│   │   │   │   │   ├── SilentDeviceOwnerManager.kt
│   │   │   │   │   ├── device/
│   │   │   │   │   │   └── DeviceDataCollector.kt
│   │   │   │   │   ├── frp/
│   │   │   │   │   │   ├── manager/
│   │   │   │   │   │   │   ├── FrpManager.kt
│   │   │   │   │   │   └── FrpPolicyManager.kt
│   │   │   │   │   ├── verification/
│   │   │   │   │   │   └── FrpVerificationService.kt
│   │   │   │   │   └── health/
│   │   │   │   │       └── FrpHealthCheckService.kt
│   │   │   │   │   └── sync/
│   │   │   │   │       └── OfflineSyncManager.kt
│   │   │   │   ├── data/
│   │   │   │   │   ├── DeviceIdProvider.kt
│   │   │   │   │   ├── DeviceIdValidator.kt
│   │   │   │   │   ├── models/
│   │   │   │   │   │   ├── heartbeat/
│   │   │   │   │   │   │   └── HeartbeatModels.kt
│   │   │   │   │   │   ├── registration/
│   │   │   │   │   │   │   └── DeviceRegistrationModels.kt
│   │   │   │   │   │   ├── tamper/
│   │   │   │   │   │   │   └── TamperModels.kt
│   │   │   │   │   │   ├── tech/
│   │   │   │   │   │   │   └── TechApiModels.kt
│   │   │   │   │   │   ├── installation/
│   │   │   │   │   │   │   └── InstallationStatusModels.kt
│   │   │   │   │   │   ├── lock/
│   │   │   │   │   │   │   └── SoftLockType.kt
│   │   │   │   │   │   └── payment/
│   │   │   │   │   │       └── PaymentApiModels.kt
│   │   │   │   │   ├── local/
│   │   │   │   │   │   ├── LoanPreferences.kt
│   │   │   │   │   │   ├── RegistrationDataBackup.kt
│   │   │   │   │   │   ├── database/
│   │   │   │   │   │   │   ├── AppDatabase.kt
│   │   │   │   │   │   │   ├── DeviceOwnerDatabase.kt
│   │   │   │   │   │   │   ├── converters/
│   │   │   │   │   │   │   │   └── JsonConverters.kt
│   │   │   │   │   │   │   ├── dao/
│   │   │   │   │   │   │   │   ├── device/
│   │   │   │   │   │   │   │   │   ├── CompleteDeviceRegistrationDao.kt
│   │   │   │   │   │   │   │   │   ├── DeviceBaselineDao.kt
│   │   │   │   │   │   │   │   │   ├── DeviceDataDao.kt
│   │   │   │   │   │   │   │   │   └── DeviceRegistrationDao.kt
│   │   │   │   │   │   │   │   ├── heartbeat/
│   │   │   │   │   │   │   │   │   ├── HeartbeatDao.kt
│   │   │   │   │   │   │   │   │   └── HeartbeatHistoryDao.kt
│   │   │   │   │   │   │   │   ├── lock/
│   │   │   │   │   │   │   │   │   ├── LockEventDao.kt
│   │   │   │   │   │   │   │   │   └── LockStateRecordDao.kt
│   │   │   │   │   │   │   │   ├── offline/
│   │   │   │   │   │   │   │   │   └── OfflineEventDao.kt
│   │   │   │   │   │   │   │   ├── sim/
│   │   │   │   │   │   │   │   │   └── SimChangeHistoryDao.kt
│   │   │   │   │   │   │   │   └── tamper/
│   │   │   │   │   │   │   │   └── TamperDetectionDao.kt
│   │   │   │   │   │   │   ├── entities/
│   │   │   │   │   │   │   │   ├── common/
│   │   │   │   │   │   │   │   │   └── SyncStatus.kt
│   │   │   │   │   │   │   │   ├── device/
│   │   │   │   │   │   │   │   │   ├── CompleteDeviceRegistrationEntity.kt
│   │   │   │   │   │   │   │   │   ├── DeviceBaselineEntity.kt
│   │   │   │   │   │   │   │   │   ├── DeviceDataEntity.kt
│   │   │   │   │   │   │   │   │   └── DeviceRegistrationEntity.kt
│   │   │   │   │   │   │   │   ├── heartbeat/
│   │   │   │   │   │   │   │   │   ├── HeartbeatEntity.kt
│   │   │   │   │   │   │   │   │   └── HeartbeatHistoryEntity.kt
│   │   │   │   │   │   │   │   ├── lock/
│   │   │   │   │   │   │   │   │   ├── LockEventEntity.kt
│   │   │   │   │   │   │   │   │   └── LockStateRecordEntity.kt
│   │   │   │   │   │   │   │   ├── offline/
│   │   │   │   │   │   │   │   │   └── OfflineEvent.kt
│   │   │   │   │   │   │   │   ├── sim/
│   │   │   │   │   │   │   │   │   └── SimChangeHistoryEntity.kt
│   │   │   │   │   │   │   │   └── tamper/
│   │   │   │   │   │   │   │   │   └── TamperDetectionEntity.kt
│   │   │   │   │   │   │   └── repository/
│   │   │   │   │   │   │       └── LocalDeviceRepository.kt
│   │   │   │   │   ├── remote/
│   │   │   │   │   │   ├── ApiClient.kt
│   │   │   │   │   │   ├── ApiEndpoints.kt
│   │   │   │   │   │   ├── ApiService.kt
│   │   │   │   │   │   ├── api/
│   │   │   │   │   │   │   ├── ApiHeadersInterceptor.kt
│   │   │   │   │   │   ├── HtmlResponseInterceptor.kt
│   │   │   │   │   │   ├── InstallationStatusService.kt
│   │   │   │   │   │   └── ServerReturnedHtmlException.kt
│   │   │   │   │   │   └── models/
│   │   │   │   │   │       └── InstallmentResponse.kt
│   │   │   │   │   └── repository/
│   │   │   │   │       └── DeviceRegistrationRepository.kt
│   │   │   │   ├── deactivation/
│   │   │   │   │   ├── DeactivationHandler.kt
│   │   │   │   │   └── DeviceOwnerDeactivationManager.kt
│   │   │   │   ├── device/
│   │   │   │   │   ├── DeviceOwnerCompatibilityChecker.kt
│   │   │   │   │   └── DeviceOwnerManager.kt
│   │   │   │   ├── frp/
│   │   │   │   │   └── CompleteFRPManager.kt
│   │   │   │   ├── kiosk/
│   │   │   │   │   ├── KioskModeManager.kt
│   │   │   │   │   └── PinManager.kt
│   │   │   │   ├── monitoring/
│   │   │   │   │   └── SecurityMonitorService.kt
│   │   │   │   ├── presentation/
│   │   │   │   │   └── activities/
│   │   │   │   │   ├── DeviceRegistrationActivity.kt
│   │   │   │   │   └── RegistrationErrorViewerActivity.kt
│   │   │   │   ├── provisioning/
│   │   │   │   │   └── ProvisioningValidator.kt
│   │   │   │   ├── receivers/
│   │   │   │   │   ├── AdminReceiver.kt
│   │   │   │   │   ├── BootReceiver.kt
│   │   │   │   │   ├── PackageRemovalReceiver.kt
│   │   │   │   │   └── QRProvisioningReceiver.kt
│   │   │   │   ├── registration/
│   │   │   │   │   ├── DeviceRegistrationManager.kt
│   │   │   │   │   └── RegistrationDataManager.kt
│   │   │   │   ├── security/
│   │   │   │   │   ├── RequestSigner.kt
│   │   │   │   │   ├── SecureConfigManager.kt
│   │   │   │   │   ├── enforcement/
│   │   │   │   │   │   ├── adb/
│   │   │   │   │   │   │   └── AdbBlocker.kt
│   │   │   │   │   │   ├── bootloader/
│   │   │   │   │   │   │   └── BootloaderLockEnforcer.kt
│   │   │   │   │   │   ├── integrity/
│   │   │   │   │   │   │   └── CustomRomBlocker.kt
│   │   │   │   │   │   ├── input/
│   │   │   │   │   │   │   └── PowerButtonBlocker.kt
│   │   │   │   │   │   ├── kiosk/
│   │   │   │   │   │   │   └── EnforcementKioskModeManager.kt
│   │   │   │   │   │   ├── monitor/
│   │   │   │   │   │   │   └── EnhancedSecurityMonitor.kt
│   │   │   │   │   │   └── policy/
│   │   │   │   │   │       └── EnhancedSecurityManager.kt
│   │   │   │   │   ├── firmware/
│   │   │   │   │   │   └── FirmwareSecurity.kt
│   │   │   │   │   ├── mode/
│   │   │   │   │   │   ├── CompleteSilentMode.kt
│   │   │   │   │   │   └── StealthModeManager.kt
│   │   │   │   │   ├── monitoring/
│   │   │   │   │   │   ├── accessibility/
│   │   │   │   │   │   │   └── AccessibilityGuard.kt
│   │   │   │   │   │   ├── boot/
│   │   │   │   │   │   │   └── BootModeDetector.kt
│   │   │   │   │   │   ├── removal/
│   │   │   │   │   │   │   └── DeviceOwnerRemovalDetector.kt
│   │   │   │   │   │   ├── sim/
│   │   │   │   │   │   │   └── SIMChangeDetector.kt
│   │   │   │   │   │   ├── tamper/
│   │   │   │   │   │   │   ├── EnhancedTamperDetector.kt
│   │   │   │   │   │   │   └── TamperBootChecker.kt
│   │   │   │   │   │   └── violation/
│   │   │   │   │   │       └── DeviceViolationDetector.kt
│   │   │   │   │   ├── response/
│   │   │   │   │   │   ├── EnhancedAntiTamperResponse.kt
│   │   │   │   │   │   └── RemoteWipeManager.kt
│   │   │   │   │   └── ssl/
│   │   │   │   │       └── DeviceOwnerSSLManager.kt
│   │   │   │   ├── services/
│   │   │   │   │   ├── data/
│   │   │   │   │   │   ├── DeviceDataCollector.kt
│   │   │   │   │   │   └── LocalDataServerService.kt
│   │   │   │   │   ├── heartbeat/
│   │   │   │   │   │   ├── HeartbeatInitializer.kt
│   │   │   │   │   │   ├── HeartbeatService.kt
│   │   │   │   │   │   └── HeartbeatWorker.kt
│   │   │   │   │   ├── lock/
│   │   │   │   │   │   ├── SoftLockMonitorService.kt
│   │   │   │   │   │   └── SoftLockOverlayService.kt
│   │   │   │   │   ├── payment/
│   │   │   │   │   │   └── PaymentNotificationManager.kt
│   │   │   │   │   ├── remote/
│   │   │   │   │   │   └── RemoteManagementService.kt
│   │   │   │   │   ├── reporting/
│   │   │   │   │   │   └── ServerBugAndLogReporter.kt
│   │   │   │   │   ├── security/
│   │   │   │   │   │   └── FirmwareSecurityMonitorService.kt
│   │   │   │   │   └── sync/
│   │   │   │   │       ├── EnhancedOfflineSyncService.kt
│   │   │   │   │       └── OfflineSyncWorker.kt
│   │   │   │   ├── ui/
│   │   │   │   │   ├── activities/
│   │   │   │   │   │   ├── data/
│   │   │   │   │   │   │   └── DeviceDataCollectionActivity.kt
│   │   │   │   │   │   ├── lock/
│   │   │   │   │   │   │   ├── EnhancedSoftLockActivity.kt
│   │   │   │   │   │   │   ├── HardLockActivity.kt
│   │   │   │   │   │   │   └── LockScreenActivity.kt
│   │   │   │   │   │   ├── main/
│   │   │   │   │   │   │   └── MainActivity.kt
│   │   │   │   │   │   ├── overlay/
│   │   │   │   │   │   │   └── SIMChangeOverlayActivity.kt
│   │   │   │   │   │   ├── provisioning/
│   │   │   │   │   │   │   ├── compatibility/
│   │   │   │   │   │   │   │   ├── CompatibilityFailureActivity.kt
│   │   │   │   │   │   │   │   ├── CompatibilitySuccessActivity.kt
│   │   │   │   │   │   │   │   ├── DeviceCompatibilityCheckActivity.kt
│   │   │   │   │   │   │   │   └── DeviceCompatibilitySuccessActivity.kt
│   │   │   │   │   │   │   ├── consent/
│   │   │   │   │   │   │   │   └── DataPrivacyConsentActivity.kt
│   │   │   │   │   │   ├── mode/
│   │   │   │   │   │   │   │   └── ProvisioningModeActivity.kt
│   │   │   │   │   │   ├── policy/
│   │   │   │   │   │   │   │   └── PolicyComplianceActivity.kt
│   │   │   │   │   │   │   └── progress/
│   │   │   │   │   │   │   │   └── ProvisioningProgressActivity.kt
│   │   │   │   │   │   ├── registration/
│   │   │   │   │   │   │   ├── RegistrationStatusActivity.kt
│   │   │   │   │   │   │   └── RegistrationSuccessActivity.kt
│   │   │   │   │   │   └── status/
│   │   │   │   │   │       └── FrpStatusActivity.kt
│   │   │   │   │   ├── screens/
│   │   │   │   │   │   └── lock/
│   │   │   │   │   │       ├── LockScreenManager.kt
│   │   │   │   │   │   ├── LockScreens.kt
│   │   │   │   │   │   ├── LockScreenStrategy.kt
│   │   │   │   │   │   └── PinEntryScreen.kt
│   │   │   │   │   └── theme/
│   │   │   │   │       └── Theme.kt
│   │   │   │   ├── update/
│   │   │   │   │   ├── config/
│   │   │   │   │   │   └── UpdateConfig.kt
│   │   │   │   │   ├── github/
│   │   │   │   │   │   └── GitHubUpdateManager.kt
│   │   │   │   │   ├── receiver/
│   │   │   │   │   │   └── UpdateReceiver.kt
│   │   │   │   │   ├── scheduler/
│   │   │   │   │   │   └── UpdateScheduler.kt
│   │   │   │   │   └── worker/
│   │   │   │   │       └── UpdateCheckWorker.kt
│   │   │   │   ├── utils/
│   │   │   │   │   ├── Result.kt
│   │   │   │   │   ├── SecureLogger.kt
│   │   │   │   │   ├── constants/
│   │   │   │   │   │   └── UserManagerConstants.kt
│   │   │   │   │   ├── helpers/
│   │   │   │   │   ├── LoanNumberValidator.kt
│   │   │   │   │   │   └── NetworkUtils.kt
│   │   │   │   │   ├── logging/
│   │   │   │   │   │   └── LogManager.kt
│   │   │   │   │   ├── ssl/
│   │   │   │   │   │   └── SSLCertificateExtractor.kt
│   │   │   │   │   ├── storage/
│   │   │   │   │   │   └── SharedPreferencesManager.kt
│   │   │   │   │   └── ui/
│   │   │   │   │       └── CustomToast.kt
│   │   │   │   └── work/
│   │   │   │       └── RestrictionEnforcementWorker.kt
│   │   │   ├── res/
│   │   │   │   ├── layout/
│   │   │   │   │   ├── activity_device_compatibility_check.xml
│   │   │   │   │   ├── activity_device_compatibility_success.xml
│   │   │   │   │   ├── activity_policy_compliance.xml
│   │   │   │   │   └── activity_provisioning_progress.xml
│   │   │   │   ├── values/
│   │   │   │   │   ├── colors.xml
│   │   │   │   │   ├── dashboard_strings.xml
│   │   │   │   │   ├── device_owner_config.xml
│   │   │   │   │   ├── lock_overlay_strings.xml
│   │   │   │   │   ├── strings.xml
│   │   │   │   │   └── themes.xml
│   │   │   │   ├── values-night/
│   │   │   │   │   └── themes.xml
│   │   │   │   ├── xml/
│   │   │   │   │   ├── backup_rules.xml
│   │   │   │   │   ├── data_extraction_rules.xml
│   │   │   │   │   ├── device_admin_receiver.xml
│   │   │   │   │   ├── file_paths.xml
│   │   │   │   │   └── network_security_config.xml
│   │   │   │   ├── drawable/
│   │   │   │   │   ├── button_background.xml
│   │   │   │   │   ├── dashboard_button_background.xml
│   │   │   │   │   ├── dashboard_card_background.xml
│   │   │   │   │   ├── device_data_background.xml
│   │   │   │   │   ├── emergency_button_background.xml
│   │   │   │   │   ├── ic_device_error.xml
│   │   │   │   │   ├── ic_device_pending.xml
│   │   │   │   │   ├── ic_device_success.xml
│   │   │   │   │   ├── ic_launcher_background.xml
│   │   │   │   │   ├── ic_launcher_foreground.xml
│   │   │   │   │   └── ic_lock.xml
│   │   │   │   ├── menu/
│   │   │   │   │   └── json_viewer_menu.xml
│   │   │   │   └── mipmap-anydpi-v26/
│   │   │   │       ├── ic_launcher.xml
│   │   │   │       └── ic_launcher_round.xml
│   │   │   └── AndroidManifest.xml
│   │   └── build.gradle.kts
│   └── build.gradle.kts
├── docs/
│   ├── README.md
│   ├── 00-START-HERE.md
│   ├── 0.0-TECHNOLOGY-AND-INDEX.md
│   ├── 1.0-DEVICE-OWNER-OVERVIEW.md
│   ├── 2.0-FEATURES-IMPLEMENTED.md
│   ├── 3.0-COMPATIBILITY.md
│   ├── 4.0-DEVICE-INSTALLATION.md
│   ├── 5.0-DEVICE-REGISTRATION.md
│   ├── 6.0-APIS.md
│   ├── 7.0-DEVICE-HEARTBEAT.md
│   ├── 8.0-HARD-LOCK-AND-SOFT-LOCK.md
│   ├── 9.0-DEVICE-TAMPER.md
│   ├── 10.0-LOCAL-DATABASES.md
│   ├── 11.0-DEVICE-LOGS-AND-BUGS.md
│   ├── 12.0-AGENT-UPDATE.md
│   ├── 13.0-SERVICES.md
│   ├── 14.0-FOLDER-STRUCTURE.md
│   ├── 15.0-FRP.md
│   ├── 16.0-DEACTIVATION.md
│   ├── 17.0-KNOX-GUARD-INTEGRATION-ROADMAP.md
│   ├── 18.0-ADVANCED-ENTERPRISE-SECURITY-ROADMAP.md
│   ├── TECH-DOCS-INDEX.md
│   └── PROJECT-ROADMAP.md
├── gradle/
│   └── wrapper/
│       ├── gradle-wrapper.jar
│       └── gradle-wrapper.properties
└── settings.gradle.kts
```

---

## Package layout summary

| Area | Package / path | Purpose |
|------|----------------|---------|
| **Root** | `com.example.deviceowner` | App entry, config, application class |
| **config** | `config/` | API constants, FRP config |
| **control** | `control/` | Hard lock, remote device control |
| **core** | `core/` | Silent DO, device data, FRP, offline sync |
| **core/frp** | `core/frp/manager/`, `verification/`, `health/` | FRP setup, policy, verification, health-check service |
| **data/models** | `data/models/{heartbeat,registration,tamper,tech,installation,lock,payment}/` | DTOs and API models by domain |
| **data/local** | `data/local/database/` | Room DB, entities (by domain), DAOs (by domain), converters, local repo |
| **data/remote** | `data/remote/`, `remote/api/`, `remote/models/` | API client, endpoints, interceptors, remote repo |
| **security** | `security/` | Signing, SSL, enforcement (see below), firmware, monitoring, response, mode |
| **security/enforcement** | `enforcement/{adb,bootloader,integrity,input,kiosk,monitor,policy}/` | ADB policy, bootloader lock, custom ROM/root, power-button blocking, kiosk lock task, security monitor, DPM policy (factory reset, etc.) |
| **monitoring** | `monitoring/` | SecurityMonitorService (orchestrates security monitors) |
| **services** | `services/{data,heartbeat,lock,payment,remote,reporting,security,sync}/` | Background services and workers by feature |
| **ui** | `ui/activities/`, `ui/screens/`, `ui/theme/` | Activities by feature, lock screens, theme |
| **update** | `update/{config,github,receiver,scheduler,worker}/` | Auto-update from GitHub |
| **utils** | `utils/` | Result, logging, helpers, storage, SSL, UI helpers |
| **frp** | `frp/` | CompleteFRPManager (full FRP flow; distinct from `core.frp`) |

---

## Data layer (entities, DAOs, models)

- **Entities** live under `data/local/database/entities/` with subpackages: **common**, **device**, **heartbeat**, **lock**, **offline**, **sim**, **tamper**.
- **DAOs** live under `data/local/database/dao/` with subpackages: **device**, **heartbeat**, **lock**, **offline**, **sim**, **tamper**.
- **Models** (DTOs) live under `data/models/` with subpackages: **heartbeat**, **registration**, **tamper**, **tech**, **installation**, **lock**, **payment**.

`AppDatabase` and `DeviceOwnerDatabase` reference these DAOs and entities by their full package names.

---

## Security enforcement (enforcement subfolders)

- **enforcement/adb/** – `AdbBlocker`: USB/debug policy (allows ADB and MTP).
- **enforcement/bootloader/** – `BootloaderLockEnforcer`: bootloader lock and monitoring.
- **enforcement/integrity/** – `CustomRomBlocker`: custom ROM, root, Magisk/Xposed detection.
- **enforcement/input/** – `PowerButtonBlocker`: power/volume combos (fastboot, recovery, safe mode).
- **enforcement/kiosk/** – `EnforcementKioskModeManager`: lock task mode and foreground enforcement.
- **enforcement/monitor/** – `EnhancedSecurityMonitor`: orchestrates ADB, bootloader, custom ROM monitoring.
- **enforcement/policy/** – `EnhancedSecurityManager`: DPM restrictions (factory reset, settings, screen capture).

---

## Security monitoring

- **security/monitoring/** subpackages: **sim** (SIMChangeDetector), **tamper** (EnhancedTamperDetector, TamperBootChecker), **boot** (BootModeDetector), **removal** (DeviceOwnerRemovalDetector), **accessibility** (AccessibilityGuard), **violation** (DeviceViolationDetector).
- **monitoring/SecurityMonitorService.kt** (top-level `monitoring/`) coordinates these and other security checks.

---

## UI folder structure (detail)

| Path | Purpose |
|------|---------|
| **ui/activities/main/** | Main app screen (device status, deactivation, FRP link). |
| **ui/activities/registration/** | Registration flow: status (launcher decision), success. |
| **ui/activities/status/** | FRP status dashboard. |
| **ui/activities/data/** | Device data collection for registration. |
| **ui/activities/overlay/** | SIM change full-screen overlay. |
| **ui/activities/lock/** | Lock screens: LockScreen, HardLock, EnhancedSoftLock. |
| **ui/activities/provisioning/** | Provisioning flow: mode, compatibility, consent, progress, policy. |
| **ui/screens/lock/** | Lock UI logic: strategy, PIN entry, lock screens, manager. |
| **ui/theme/** | App theme (Material/Compose). |

Package names follow the folder hierarchy (e.g. `ui.activities.provisioning.mode`, `ui.screens.lock`). The manifest and all call sites use these full class names.

---

## Notes

- **Root**: Shown as `DEVICEOWNER/`; your repo folder may match.
- **Package**: Sources under `app/src/main/java/com/example/deviceowner/` (Kotlin `.kt`).
- **res/**: `layout/`, `values/`, `values-night/`, `xml/`, `drawable/`, `menu/`, `mipmap-*` under `app/src/main/res/`.
- **Manifest**: `app/src/main/AndroidManifest.xml`.
- **Build**: Root `settings.gradle.kts`; module `app/build.gradle.kts`; Gradle wrapper in `gradle/wrapper/`.

For behavior of each area, see docs [0.0–18.0](README.md).
